use todo_tasks;

CREATE TABLE todo_status (
  todo_status_id INT NOT NULL AUTO_INCREMENT,
  todo_status_code VARCHAR(2) NOT NULL,
  todo_status_name VARCHAR(20) NOT NULL,
  todo_status_desc VARCHAR(50),
  PRIMARY KEY (todo_status_id)  
);
CREATE TABLE todo_items (
  id INT NOT NULL,
  todo_title VARCHAR(30) NOT NULL,
  todo_desc VARCHAR(100),
  todo_datetime DATETIME NOT NULL,
  todo_status INT
);

ALTER TABLE todo_items 
  MODIFY id INT NOT NULL AUTO_INCREMENT,
  ADD PRIMARY KEY(id);

ALTER TABLE todo_items
  ADD CONSTRAINT fk_todo_status
  FOREIGN KEY(todo_status) REFERENCES todo_status(todo_status_id);

INSERT INTO todo_status (todo_status_code, todo_status_name, todo_status_desc)
VALUES 
  ('P', 'PENDING', 'Not yet done'),
  ('I', 'IN-PROGRESS', 'Work in progress'),
  ('C', 'COMPLETED', 'Work is done');

ALTER TABLE todo_status
  ADD created_by VARCHAR(30) NOT NULL DEFAULT 'SYSTEM',
  ADD created_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  ADD modified_by VARCHAR(30) DEFAULT NULL,
  ADD modified_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;

/*ALTER TABLE todo_items
  MODIFY todo_status ENUM('PENDING','IN-PROGRESS','COMPLETED') NOT NULL DEFAULT 'PENDING';*/

SELECT * FROM todo_items;


SHOW TABLES;
